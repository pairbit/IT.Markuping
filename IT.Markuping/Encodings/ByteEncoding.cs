using System;
using System.Diagnostics.CodeAnalysis;

namespace IT.Markuping.Encodings;

public class ByteEncoding
{
    public readonly struct Tokens
    {
        //<>/: \"'=

        //60,62,47,58,32,34,39,61
        public static readonly Tokens Utf8
            = new((byte)'<', (byte)'>', (byte)'/', (byte)':', (byte)' ',
                  (byte)'"', (byte)'\'', (byte)'=');

        public static readonly Tokens EBCDIC
            = new(76, 110, 97, 122, 64, 127, 125, 126);

        public static readonly Tokens EBCDIC_Turkish
            = new(76, 110, 97, 122, 64, 252, 125, 126);

        internal readonly byte _lt;
        internal readonly byte _gt;
        internal readonly byte _slash;
        internal readonly byte _colon;
        internal readonly byte _space;//" "
        internal readonly byte _quot;//"
        internal readonly byte _apos;//'
        internal readonly byte _eq;//=

        public Tokens(byte lt, byte gt, byte slash, byte colon, byte space,
            byte quot, byte apos, byte eq)
        {
            _lt = lt;
            _gt = gt;
            _slash = slash;
            _colon = colon;
            _space = space;
            _quot = quot;
            _apos = apos;
            _eq = eq;
        }

        public static readonly int[] Utf8_CodePages = [437, 708, 720, 737, 775, 850, 852, 855, 857, 858, 860, 861, 862, 863, 864, 865, 866, 869, 874, 932, 936, 949, 950, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 1361, 10000, 10001, 10002, 10004, 10005, 10006, 10007, 10010, 10017, 10021, 10029, 10079, 10081, 10082, 20000, 20001, 20002, 20003, 20004, 20005, 20105, 20106, 20107, 20108, 20127, 20261, 20269, 20866, 20932, 20936, 20949, 21866, 28591, 28592, 28593, 28594, 28595, 28596, 28597, 28598, 28599, 28603, 28605, 29001, 65001];

        public static readonly int[] EBCDIC_CodePages = [37, 500, 870, 875, 1047, 1140, 1141, 1142, 1143, 1144, 1145, 1146, 1147, 1148, 1149, 20273, 20277, 20278, 20280, 20284, 20285, 20290, 20297, 20420, 20423, 20424, 20833, 20838, 20871, 20880, 20924, 21025];

        public static readonly int[] EBCDIC_Turkish_CodePages = [1026, 20905];
    }

    internal readonly bool[]? _otherSpaces;
    internal readonly byte[] _startClosing;
    internal readonly Tokens _tokens;

    public ByteEncoding(Tokens tokens)
    {
        _tokens = tokens;
        _startClosing = [tokens._lt, tokens._slash];//</
    }

    public ByteEncoding(Tokens tokens, bool[] otherSpaces)
    {
        if (otherSpaces == null) throw new ArgumentNullException(nameof(otherSpaces));
        if (otherSpaces.Length != 256) throw new ArgumentOutOfRangeException(nameof(otherSpaces));

        _tokens = tokens;
        _startClosing = [tokens._lt, tokens._slash];//</
        _otherSpaces = otherSpaces;
    }

    #region Private

    //32
    private static readonly bool[] Utf8_WhiteSpace = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5*/false,
/*6*/false,
/*7*/false,
/*8*/false,
/*9  \t*/false,
/*10 \n*/false,
/*11 \v*/false,
/*12 \f*/false,
/*13 \r*/false,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21*/false,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32 space*/true,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37*/false,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/false,
/*64*/false,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    //64
    private static readonly bool[] EBCDIC_WhiteSpace = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5*/false,
/*6*/false,
/*7*/false,
/*8*/false,
/*9*/false,
/*10*/false,
/*11*/false,
/*12*/false,
/*13*/false,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21*/false,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32*/false,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37*/false,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/false,
/*64 space*/true,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    //9,10,13,32
    private static readonly bool[] Utf8_WhiteSpaces = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5*/false,
/*6*/false,
/*7*/false,
/*8*/false,
/*9  \t*/true,
/*10 \n*/true,
/*11 \v*/false,
/*12 \f*/false,
/*13 \r*/true,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21*/false,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32 space*/true,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37*/false,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/false,
/*64*/false,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133 \u0085*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160 NO-BREAK SPACE*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    //63,63,63,32
    private static readonly bool[] Europa_29001_WhiteSpaces = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5*/false,
/*6*/false,
/*7*/false,
/*8*/false,
/*9*/false,
/*10*/false,
/*11*/false,
/*12*/false,
/*13*/false,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21*/false,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32 space*/true,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37*/false,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/true,
/*64*/false,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    //5,37,13,64
    private static readonly bool[] EBCDIC_WhiteSpaces = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5 \t*/true,
/*6*/false,
/*7*/false,
/*8*/false,
/*9*/false,
/*10*/false,
/*11*/false,
/*12*/false,
/*13 \r*/true,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21*/false,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32*/false,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37 \n*/true,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/false,
/*64 space*/true,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    //5,21,13,64
    private static readonly bool[] IBM_Latin1_WhiteSpaces = [
/*0*/false,
/*1*/false,
/*2*/false,
/*3*/false,
/*4*/false,
/*5 \t*/true,
/*6*/false,
/*7*/false,
/*8*/false,
/*9*/false,
/*10*/false,
/*11*/false,
/*12*/false,
/*13 \r*/true,
/*14*/false,
/*15*/false,
/*16*/false,
/*17*/false,
/*18*/false,
/*19*/false,
/*20*/false,
/*21 \n*/true,
/*22*/false,
/*23*/false,
/*24*/false,
/*25*/false,
/*26*/false,
/*27*/false,
/*28*/false,
/*29*/false,
/*30*/false,
/*31*/false,
/*32*/false,
/*33*/false,
/*34*/false,
/*35*/false,
/*36*/false,
/*37*/false,
/*38*/false,
/*39*/false,
/*40*/false,
/*41*/false,
/*42*/false,
/*43*/false,
/*44*/false,
/*45*/false,
/*46*/false,
/*47*/false,
/*48*/false,
/*49*/false,
/*50*/false,
/*51*/false,
/*52*/false,
/*53*/false,
/*54*/false,
/*55*/false,
/*56*/false,
/*57*/false,
/*58*/false,
/*59*/false,
/*60*/false,
/*61*/false,
/*62*/false,
/*63*/false,
/*64 space*/true,
/*65*/false,
/*66*/false,
/*67*/false,
/*68*/false,
/*69*/false,
/*70*/false,
/*71*/false,
/*72*/false,
/*73*/false,
/*74*/false,
/*75*/false,
/*76*/false,
/*77*/false,
/*78*/false,
/*79*/false,
/*80*/false,
/*81*/false,
/*82*/false,
/*83*/false,
/*84*/false,
/*85*/false,
/*86*/false,
/*87*/false,
/*88*/false,
/*89*/false,
/*90*/false,
/*91*/false,
/*92*/false,
/*93*/false,
/*94*/false,
/*95*/false,
/*96*/false,
/*97*/false,
/*98*/false,
/*99*/false,
/*100*/false,
/*101*/false,
/*102*/false,
/*103*/false,
/*104*/false,
/*105*/false,
/*106*/false,
/*107*/false,
/*108*/false,
/*109*/false,
/*110*/false,
/*111*/false,
/*112*/false,
/*113*/false,
/*114*/false,
/*115*/false,
/*116*/false,
/*117*/false,
/*118*/false,
/*119*/false,
/*120*/false,
/*121*/false,
/*122*/false,
/*123*/false,
/*124*/false,
/*125*/false,
/*126*/false,
/*127*/false,
/*128*/false,
/*129*/false,
/*130*/false,
/*131*/false,
/*132*/false,
/*133*/false,
/*134*/false,
/*135*/false,
/*136*/false,
/*137*/false,
/*138*/false,
/*139*/false,
/*140*/false,
/*141*/false,
/*142*/false,
/*143*/false,
/*144*/false,
/*145*/false,
/*146*/false,
/*147*/false,
/*148*/false,
/*149*/false,
/*150*/false,
/*151*/false,
/*152*/false,
/*153*/false,
/*154*/false,
/*155*/false,
/*156*/false,
/*157*/false,
/*158*/false,
/*159*/false,
/*160*/false,
/*161*/false,
/*162*/false,
/*163*/false,
/*164*/false,
/*165*/false,
/*166*/false,
/*167*/false,
/*168*/false,
/*169*/false,
/*170*/false,
/*171*/false,
/*172*/false,
/*173*/false,
/*174*/false,
/*175*/false,
/*176*/false,
/*177*/false,
/*178*/false,
/*179*/false,
/*180*/false,
/*181*/false,
/*182*/false,
/*183*/false,
/*184*/false,
/*185*/false,
/*186*/false,
/*187*/false,
/*188*/false,
/*189*/false,
/*190*/false,
/*191*/false,
/*192*/false,
/*193*/false,
/*194*/false,
/*195*/false,
/*196*/false,
/*197*/false,
/*198*/false,
/*199*/false,
/*200*/false,
/*201*/false,
/*202*/false,
/*203*/false,
/*204*/false,
/*205*/false,
/*206*/false,
/*207*/false,
/*208*/false,
/*209*/false,
/*210*/false,
/*211*/false,
/*212*/false,
/*213*/false,
/*214*/false,
/*215*/false,
/*216*/false,
/*217*/false,
/*218*/false,
/*219*/false,
/*220*/false,
/*221*/false,
/*222*/false,
/*223*/false,
/*224*/false,
/*225*/false,
/*226*/false,
/*227*/false,
/*228*/false,
/*229*/false,
/*230*/false,
/*231*/false,
/*232*/false,
/*233*/false,
/*234*/false,
/*235*/false,
/*236*/false,
/*237*/false,
/*238*/false,
/*239*/false,
/*240*/false,
/*241*/false,
/*242*/false,
/*243*/false,
/*244*/false,
/*245*/false,
/*246*/false,
/*247*/false,
/*248*/false,
/*249*/false,
/*250*/false,
/*251*/false,
/*252*/false,
/*253*/false,
/*254*/false,
/*255*/false];

    private static readonly int[] Utf8_CodePages = [437, 708, 720, 737, 775, 850, 852, 855, 857, 858, 860, 861, 862, 863, 864, 865, 866, 869, 874, 932, 936, 949, 950, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 1361, 10000, 10001, 10002, 10004, 10005, 10006, 10007, 10010, 10017, 10021, 10029, 10079, 10081, 10082, 20000, 20001, 20002, 20003, 20004, 20005, 20105, 20106, 20107, 20108, 20127, 20261, 20269, 20866, 20932, 20936, 20949, 21866, 28591, 28592, 28593, 28594, 28595, 28596, 28597, 28598, 28599, 28603, 28605, 65001];

    private static readonly int[] EBCDIC_CodePages = [37, 500, 870, 875, 1140, 1141, 1142, 1143, 1144, 1145, 1146, 1147, 1148, 1149, 20273, 20277, 20278, 20280, 20284, 20285, 20290, 20297, 20420, 20423, 20424, 20833, 20838, 20871, 20880, 21025];

    #endregion

    public static readonly ByteEncoding Utf8_Strict = new(Tokens.Utf8);
    public static readonly ByteEncoding EBCDIC_Strict = new(Tokens.EBCDIC);
    public static readonly ByteEncoding EBCDIC_Turkish_Strict = new(Tokens.EBCDIC_Turkish);

    public static readonly ByteEncoding Utf8 = new(Tokens.Utf8, Utf8_WhiteSpaces);
    public static readonly ByteEncoding Europa = new(Tokens.Utf8, Europa_29001_WhiteSpaces);
    public static readonly ByteEncoding EBCDIC = new(Tokens.EBCDIC, EBCDIC_WhiteSpaces);
    public static readonly ByteEncoding EBCDIC_Turkish = new(Tokens.EBCDIC_Turkish, EBCDIC_WhiteSpaces);
    public static readonly ByteEncoding IBM_Latin1 = new(Tokens.EBCDIC, IBM_Latin1_WhiteSpaces);

    public static bool TryGet(int codePage, [MaybeNullWhen(false)] out ByteEncoding byteEncoding)
    {
        if (Array.IndexOf(Utf8_CodePages, codePage) > -1)
        {
            byteEncoding = Utf8;
            return true;
        }
        if (codePage == 29001)
        {
            byteEncoding = Europa;
            return true;
        }
        if (Array.IndexOf(EBCDIC_CodePages, codePage) > -1)
        {
            byteEncoding = EBCDIC;
            return true;
        }
        if (codePage == 1026 || codePage == 20905)
        {
            byteEncoding = EBCDIC_Turkish;
            return true;
        }
        if (codePage == 1047 || codePage == 20924)
        {
            byteEncoding = IBM_Latin1;
            return true;
        }
        byteEncoding = null;
        return false;
    }

    public static bool TryGetStrict(int codePage, [MaybeNullWhen(false)] out ByteEncoding byteEncoding)
    {
        if (Array.IndexOf(Tokens.Utf8_CodePages, codePage) > -1)
        {
            byteEncoding = Utf8_Strict;
            return true;
        }
        if (Array.IndexOf(Tokens.EBCDIC_CodePages, codePage) > -1)
        {
            byteEncoding = EBCDIC_Strict;
            return true;
        }
        if (codePage == 1026 || codePage == 20905)
        {
            byteEncoding = EBCDIC_Turkish_Strict;
            return true;
        }
        byteEncoding = null;
        return false;
    }
}